<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Inventory Management Dashboard</title>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    
    <!-- CSS for darkmode toggle button -->
    <link rel="stylesheet" href="darkmode.css">
    
    <script src="https://www.gstatic.com/firebasejs/10.14.0/firebase-app.js" type="module"></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.0/firebase-database.js" type="module"></script>
    
    <!-- CSS for styles -->
    <style>
        :root {
            --primary-color: #4a90e2;
            --secondary-color: #f39c12;
            --background-color: #f4f7f9;
            --text-color: #333;
            --card-background: #ffffff;
            --card-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
            --transition-speed: 0.3s;
        }

        body {
            font-family: 'Roboto', sans-serif;
            color: var(--text-color);
            margin: 0;
            padding: 0;
            background-color: var(--background-color);
            transition: background-color var(--transition-speed);
        }
        
        /* Navbar */
        .navbar {
            background-color: var(--primary-color);
            padding: 1rem;
            color: #fff;
            position: sticky;
            top: 0;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .navbar h2 {
            margin: 0;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            letter-spacing: 1px;
        }

        /* Quick Links */
        .quick-links {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            position: sticky;
            top: 70px;
            background-color: rgba(255, 255, 255, 0.9);
            padding: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            z-index: 100;
            backdrop-filter: blur(10px);
        }
        
        .quick-links a {
            margin: 5px 10px;
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 600;
            transition: all var(--transition-speed) ease-in-out;
            padding: 8px 12px;
            border-radius: 20px;
        }
        
        .quick-links a:hover {
            background-color: var(--primary-color);
            color: #fff;
            transform: translateY(-2px);
        }
        
        /* Main Content */
        .container {
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .section-header {
            margin-bottom: 1.5rem;
            color: var(--primary-color);
            font-weight: 600;
            font-size: 1.5em;
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 0.5rem;
        }
        
        /* Card Style */
        .card {
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: var(--card-shadow);
            transition: transform var(--transition-speed), box-shadow var(--transition-speed);
            overflow: hidden;
            opacity: 0;
            transform: translateY(20px);
            animation: slideIn 0.6s forwards;   
            background-color: var(--card-background);
            border: none;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 20px rgba(0, 0, 0, 0.15);
        }
        
        /* Background Colors for Cards */
        .card.servers { background-color: #e3f2fd; }
        .card.employees { background-color: #fff8e1; }
        .card.maintenance { background-color: #e8f5e9; }
        .card.vpn { background-color: #e1f5fe; }
        .card.aws { background-color: #fff3e0; }

        .card h3 {
            margin-top: 0;
            color: var(--primary-color);
        }

        /* Button styles */
        .btn {
            padding: 10px 20px;
            color: white;
            background-color: var(--primary-color);
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all var(--transition-speed);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .btn:hover {
            background-color: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
        }

        /* Table styles */
        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0 10px;
            margin-bottom: 1rem;
            background-color: transparent;
        }
        
        th, td {
            padding: 15px;
            text-align: left;
            background-color: rgba(255, 255, 255, 0.8);
            transition: background-color var(--transition-speed);
        }
        
        th {
            background-color: var(--primary-color);
            color: #ffffff;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        tr {
            transition: transform var(--transition-speed);
        }
        
        tr:hover {
            transform: scale(1.02);
        }

        /* Animation */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Slide-in animation */
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Highlight effect */
        .highlight {
            animation: highlightPulse 1s ease-in-out;
        }

        @keyframes highlightPulse {
            0%, 100% { box-shadow: 0 0 15px 5px rgba(74, 144, 226, 0.5); }
            50% { box-shadow: 0 0 25px 10px rgba(74, 144, 226, 0.8); }
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .quick-links {
                flex-direction: column;
                align-items: center;
            }
            
            .card {
                padding: 15px;
            }
            
            .btn {
                width: 100%;
                margin-bottom: 10px;
            }
        }

        /* Dark mode styles */
        .dark-mode {
            --primary-color: #64b5f6;
            --secondary-color: #ffa726;
            --background-color: #263238;
            --text-color: #eceff1;
            --card-background: #37474f;
            --card-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }

        .dark-mode .navbar {
            background-color: #1e272e;
        }

        .dark-mode .quick-links {
            background-color: rgba(38, 50, 56, 0.9);
        }

        .dark-mode .quick-links a {
            color: var(--primary-color);
        }

        .dark-mode .quick-links a:hover {
            background-color: var(--primary-color);
            color: #263238;
        }

        .dark-mode th {
            background-color: #455a64;
        }

        .dark-mode td {
            background-color: rgba(55, 71, 79, 0.8);
        }

        /* Additional animations */
        .card {
            animation: cardAppear 0.5s ease-out forwards;
        }

        @keyframes cardAppear {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .btn {
            position: relative;
            overflow: hidden;
        }

        .btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.5);
            opacity: 0;
            border-radius: 100%;
            transform: scale(1, 1) translate(-50%);
            transform-origin: 50% 50%;
        }

        @keyframes ripple {
            0% {
                transform: scale(0, 0);
                opacity: 1;
            }
            20% {
                transform: scale(25, 25);
                opacity: 1;
            }
            100% {
                opacity: 0;
                transform: scale(40, 40);
            }
        }

        .btn:focus:not(:active)::after {
            animation: ripple 1s ease-out;
        }

        /* Loading animation for tables */
        @keyframes shimmer {
            0% {
                background-position: -1000px 0;
            }
            100% {
                background-position: 1000px 0;
            }
        }

        .loading::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            animation: shimmer 2s infinite;
            background: linear-gradient(to right, #f6f7f8 0%, #edeef1 20%, #f6f7f8 40%, #f6f7f8 100%);
            background-size: 1000px 100%;
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--secondary-color);
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <div class="navbar">
        <h2>Inventory Management Dashboard</h2>
        <nav>
            <!-- button for darkmode toggle  -->
            <label class="switch">
              <span class="sun"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g fill="#ffd43b"><circle r="5" cy="12" cx="12"></circle><path d="m21 13h-1a1 1 0 0 1 0-2h1a1 1 0 0 1 0 2zm-17 0h-1a1 1 0 0 1 0-2h1a1 1 0 0 1 0 2zm13.66-5.66a1 1 0 0 1 -.66-.29 1 1 0 0 1 0-1.41l.71-.71a1 1 0 1 1 1.41 1.41l-.71.71a1 1 0 0 1 -.75.29zm-12.02 12.02a1 1 0 0 1 -.71-.29 1 1 0 0 1 0-1.41l.71-.66a1 1 0 0 1 1.41 1.41l-.71.71a1 1 0 0 1 -.7.24zm6.36-14.36a1 1 0 0 1 -1-1v-1a1 1 0 0 1 2 0v1a1 1 0 0 1 -1 1zm0 17a1 1 0 0 1 -1-1v-1a1 1 0 0 1 2 0v1a1 1 0 0 1 -1 1zm-5.66-14.66a1 1 0 0 1 -.7-.29l-.71-.71a1 1 0 0 1 1.41-1.41l.71.71a1 1 0 0 1 0 1.41 1 1 0 0 1 -.71.29zm12.02 12.02a1 1 0 0 1 -.7-.29l-.66-.71a1 1 0 0 1 1.36-1.36l.71.71a1 1 0 0 1 0 1.41 1 1 0 0 1 -.71.24z"></path></g></svg></span>
              <span class="moon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="m223.5 32c-123.5 0-223.5 100.3-223.5 224s100 224 223.5 224c60.6 0 115.5-24.2 155.8-63.4 5-4.9 6.3-12.5  3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6-96.9 0-175.5-78.8-175.5-176 0-65.8 36-123.1 89.3-153.3 6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"></path></svg></span>   
              <input type="checkbox" class="input">
              <span class="slider"></span>
            </label>
        </nav>
    </div>

    <!-- Quick Links -->
    <div class="quick-links">
        <a href="#maintenance-window" onclick="highlightCard('maintenance-window')">Maintenance Window</a>
        <a href="#vpn-details" onclick="highlightCard('vpn-details')">VPN Details</a>
        <a href="#aws-console-link" onclick="highlightCard('aws-console-link')">AWS Console Link</a>
        <a href="#number-of-servers" onclick="highlightCard('number-of-servers')">Number of Servers</a>
        <a href="#employees-section" onclick="highlightCard('employees-section')">Employees</a>
    </div>
    
    <!-- Main Content -->
    <div class="container">
        <!-- Maintenance Window -->
        <div class="card maintenance" id="maintenance-window">
            <h3 class="section-header">Maintenance Window</h3>
            <p>Scheduled maintenance windows for different servers:</p>
            <table>
                <tr>
                    <th>Server Name</th>
                    <th>Maintenance Start</th>
                    <th>Maintenance End</th>
                </tr>
                <tr>
                    <td>Server A</td>
                    <td>2024-09-30 01:00 AM</td>
                    <td>2024-09-30 03:00 AM</td>
                </tr>
                <tr>
                    <td>Server B</td>
                    <td>2024-10-05 11:00 PM</td>
                    <td>2024-10-06 01:00 AM</td>
                </tr>
            </table>
        </div>

        <!-- VPN Details -->
        <div class="card vpn" id="vpn-details">
            <h3 class="section-header">VPN Details</h3>
            <p>Client VPN Information:</p>
            <div class="flex-div">
                <h3>VPN Provider</h3>
                <p>Provider Name</p><p>Download link</p>
            </div>
        </div>

        <!-- AWS Console Link -->
        <div class="card aws" id="aws-console-link">
            <h3 class="section-header">AWS Console Link</h3>
            <p>Client AWS Console Access:</p>
            <a href="https://console.aws.amazon.com/" target="_blank" class="btn">Access AWS Console</a>
        </div>

        <!-- Servers Section -->
        <div class="card servers" id="number-of-servers">
            <h3 class="section-header">Servers</h3>
            <p>Click below to view server details:</p>
            <button class="btn" id="toggle-servers" onclick="toggleServerDetails()">View Servers</button>
            <!-- Server details will be shown in modal -->
            <div id="server-details" class="server-details">
                <h3></h3>
                <div class="table-container">
                    <table>
                        <tr>
                            <th>Server Name</th>
                            <th>Server Status</th>
                        </tr>
                        <tr>
                            <td>Server A</td>
                            <td>Running</td>
                        </tr>
                        <tr>
                            <td>Server B</td>
                            <td>Down</td>
                        </tr>
                        <tr>
                            <td>Server C</td>
                            <td>Running</td>
                        </tr>
                        <tr>
                            <td>Server A</td>
                            <td>Running</td>
                        </tr>
                        <tr>
                            <td>Server B</td>
                            <td>Down </td>
                        </tr>
                        <tr>
                            <td>Server C</td>
                            <td>Running</td>
                        </tr>
                        <tr>
                            <td>Server A</td>
                            <td>Running</td>
                        </tr>
                        <tr>
                            <td>Server B</td>
                            <td>Down</td>
                        </tr>
                        <tr>
                            <td>Server C</td>
                            <td>Running</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>

        <!-- Employees Card -->
        <div class="card employees" id="employees-section">
            <h3 class="section-header">Employees</h3>
            <p>Click to view details of employees based on their role:</p>
            <button class="btn" onclick="toggleEmployeeDetails('admin')">PS Admin</button>
            <button class="btn" onclick="toggleEmployeeDetails('developer')">PS Developer</button>
            <button class="btn" onclick="toggleEmployeeDetails('dbadmin')">DB Administrator</button>
            <button class="btn" onclick="toggleEmployeeDetails('awsengineer')">AWS Cloud Engineer</button>

            <!-- Employee details will be shown here -->
            <div id="employee-details" class="employee-details">
                <h3 id="employee-role-title"></h3>
                <span style="cursor:pointer;margin-bottom: 10px; background-color: #00000061; text-align: center;  font-size: larger; color: whitesmoke; font-weight: bold; padding: 0px 15px 0px 15px; " onclick="closeEmployeeDetails()">Hide employee details</span>

                <div class="employee-table-container">
                    <table id="employee-table">
                        <!-- Employee details will be dynamically added here -->
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- JS for Modals and Dynamic Content -->
    <script>
        // Function to highlight the card
        function highlightCard(cardId) {
            document.querySelectorAll('.card').forEach(card => {
                card.classList.remove('highlight');
            });

            const card = document.getElementById(cardId);
            if (card) {
                card.classList.add('highlight');
                setTimeout(() => {
                    card.classList.remove('highlight');
                }, 2000);
            }
        }

        function toggleServerDetails() {
            const serverDetails = document.getElementById("server-details");
            const toggleButton = document.getElementById("toggle-servers");

            if (serverDetails.classList.contains("active")) {
                serverDetails.classList.remove("active");
                toggleButton.textContent = "View Servers";
            } else {
                serverDetails.classList.add("active");
                toggleButton.textContent = "Hide Servers";
            }
        }

        // Dark mode toggle
        const darkModeToggle = document.querySelector('.switch input[type="checkbox"]');
        darkModeToggle.addEventListener('change', () => {
            document.body.classList.toggle('dark-mode');
        });

        // Add loading animation to tables
        document.querySelectorAll('table').forEach(table => {
            table.classList.add('loading');
            setTimeout(() => {
                table.classList.remove('loading');
            }, 1000);
        });

        // Add ripple effect to buttons
        document.querySelectorAll('.btn').forEach(button => {
            button.addEventListener('click', function(e) {
                let ripple = document.createElement('div');
                this.appendChild(ripple);
                let x = e.pageX - this.offsetLeft;
                let y = e.pageY - this.offsetTop;
                ripple.style.left = `${x}px`;
                ripple.style.top = `${y}px`;
                setTimeout(() => {
                    ripple.remove();
                }, 600);
            });
        });
    </script>

    <script type="module">
        // Import Firebase modules
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-app.js";
        import { getDatabase, ref, get } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-database.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBPPkzDt3cY3DT-sodGvu7uZy_is0GzrZc",
            authDomain: "erp-employees-84883.firebaseapp.com",
            databaseURL: "https://erp-employees-84883-default-rtdb.firebaseio.com",
            projectId: "erp-employees-84883",
            storageBucket: "erp-employees-84883.appspot.com",
            messagingSenderId: "1076821963095",
            appId: "1:1076821963095:web:8ae8d1f6ae4ba388894e12",
            measurementId: "G-DK1B84SPWM"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);

        // Updated function to toggle employee details based on role
        window.toggleEmployeeDetails = function(role) {
            const employeeDetails = document.getElementById('employee-details');
            const employeeRoleTitle = document.getElementById('employee-role-title');
            const employeeTable = document.getElementById('employee-table');

            // Fetch employee data from Firebase
            get(ref(database, `employees/${role}`)).then((snapshot) => {
                if (snapshot.exists()) {
                    const employeeData = snapshot.val();

                    // Clear previous table data
                    employeeTable.innerHTML = '';

                    Object.keys(employeeData).forEach(key => {
                        const employee = employeeData[key];
                        const row = document.createElement('tr');
                        row.innerHTML = `<td>${employee.name}</td><td>${employee.role}</td>`;
                        employeeTable.appendChild(row);
                    });

                    // Update the title with the selected role
                    const roleTitles = {
                        admin: "Admin Employees",
                        developer: "Developers",
                        dbadmin: "DB Administrators",
                        awsengineer: "AWS Engineers"
                    };
                    employeeRoleTitle.textContent = roleTitles[role];

                    // Show the employee details section and animate
                    employeeDetails.classList.add('active');

                } else {
                    employeeTable.innerHTML = `
                        <tr>
                            <td colspan="2" style="text-align: center; color: red; font-size: 24px;">
                                No employees found
                            </td>
                        </tr>`;
                }
            }).catch((error) => {
                console.error("Error fetching data:", error);
            });
        }

        // Close employee details
        window.closeEmployeeDetails = function() {
            const employeeDetails = document.getElementById('employee-details');
            employeeDetails.classList.remove('active');
        }
    </script>
</body>
</html>